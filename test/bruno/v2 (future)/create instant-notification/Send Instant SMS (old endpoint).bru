meta {
  name: Send Instant SMS (old endpoint)
  type: http
  seq: 1
}

post {
  url: {{host}}/notifications/api/v1/future/orders/instant
  body: json
  auth: inherit
}

body:json {
  {
    "idempotencyId": "{{random_idempotency_id}}",
    "sendersReference": "{{random_idempotency_id}}",
    "recipient": {
      "recipientSms": {      
        "phoneNumber": "{{process.env.TESTDATA_MY_PHONE}}",
        "timeToLiveInSeconds": 300,
        "smsSettings": {    
          "body": "(TEST) Dette er en instant-testmelding til meg selv (Env.: {{Environment}} - Ref: {{random_idempotency_id}})"
        }
      }
    }
  }
}

docs {
  Creates and sends an instant SMS notification to a single recipient.
  The request is processed immediately and the SMS is sent without delay.
  
  Required environment variables:
  - TESTDATA_MY_PHONE: Your phone number for testing
  
  The idempotencyId ensures the same notification is not sent multiple times
  if the request is repeated.
}
